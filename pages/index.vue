<template>
    <div class="relative min-h-screen overflow-hidden">
        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
        <div ref="particles" class="absolute inset-0 z-0"></div>
        
        <div class="relative z-10">
            <!-- –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
            <div ref="heroSection" class="flex flex-col gap-8 text-center py-20">
                <p ref="mainTitle" class="text-4xl md:text-6xl font-mono font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent opacity-0">
                    –í–∞—à AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —É—á—ë–±—ã –∏ —Ä–∞–±–æ—Ç—ã
                </p>
                
                <p ref="subtitle" class="max-w-2xl text-lg text-gray-300 mx-auto leading-relaxed opacity-0">
                    –û–±—â–∞–π—Ç–µ—Å—å —Å —É–º–Ω—ã–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–∞–π–ª—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –ø–æ–º–æ—â—å –≤ –ª—é–±—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö
                </p>
                
                <div ref="ctaButton" class="opacity-0">
                    <NuxtLink :to="userStore.authenticated ? '/chat' : '/login'" class="group relative flex items-center gap-2 rounded-xl px-8 py-3 w-fit mx-auto bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
                        <span class="font-semibold text-white">üöÄ –ù–∞—á–∞—Ç—å</span>
                        <span class="group-hover:translate-x-1 transition-transform">‚Üí</span>
                    </NuxtLink>
                </div>
                
                <div ref="featuresList" class="flex flex-wrap justify-center gap-6 mt-4 text-sm text-gray-400 opacity-0">
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                        <span>–ë–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 bg-purple-400 rounded-full"></div>
                        <span>–î–æ—Å—Ç—É–ø–Ω–æ –≤ Telegram –∏ –Ω–∞ —Å–∞–π—Ç–µ</span>
                    </div>
                </div>
            </div>

            <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            <div ref="cardsSection" class="flex flex-col gap-12 py-16 px-4 max-w-6xl mx-auto">
                <div ref="sectionTitle" class="text-center opacity-0">
                    <p class="text-3xl md:text-4xl font-mono font-bold text-white mb-4">
                        –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
                    </p>
                    <p class="text-gray-400 max-w-2xl mx-auto">
                        –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –æ–±—É—á–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div v-for="(card, index) in featureCards" 
                         :key="index" 
                         :ref="el => cardRefs[index] = el"
                         class="group relative transition-all duration-500 hover:-translate-y-3 flex flex-col gap-4 rounded-2xl bg-[#201e18] border border-white/20 hover:border-blue-500/30 p-6 text-center hover:shadow-2xl hover:shadow-blue-500/10 opacity-0">
                        <div class="w-12 h-12 mx-auto rounded-xl bg-blue-500/10 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                            <span class="text-2xl">{{ card.icon }}</span>
                        </div>
                        <p class="text-xl font-semibold text-white">{{ card.title }}</p>
                        <p class="text-gray-400 leading-relaxed">
                            {{ card.description }}
                        </p>
                        <div class="mt-auto text-blue-400 text-sm font-medium">
                            {{ card.features }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
/* –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —è–∑—ã–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
useSeoMeta({
    title: '–ì–ª–∞–≤–Ω–∞—è',
    lang: 'ru'
})

/* –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ */
const userStore = useUserStore()

/* –†–µ—Ñ—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π */
const mainTitle = ref(null)
const subtitle = ref(null)
const ctaButton = ref(null)
const featuresList = ref(null)
const sectionTitle = ref(null)
const cardRefs = ref([])

/* –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–µ–∫ */
const featureCards = [
    {
        icon: 'üí¨',
        title: '–£–º–Ω—ã–π —á–∞—Ç',
        description: '–û–±—â–∞–π—Ç–µ—Å—å —Å AI –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã, –ø–æ–ª—É—á–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –ø–æ–º–æ—â—å –≤ —Ä–µ—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á',
        features: 'GPT-4o Mini ¬∑ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã'
    },
    {
        icon: 'üé®',
        title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π',
        description: '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π',
        features: 'GPT-5 Image ¬∑ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ'
    },
    {
        icon: 'üìÅ',
        title: '–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏',
        description: '–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –∏—Ö –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É',
        features: 'PDF ¬∑ Word ¬∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ¬∑ –¢–µ–∫—Å—Ç'
    }
]

/* –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –¥–ª—è —Ñ–æ–Ω–∞ */
const particles = ref(null)
const createParticles = () => {
    if (!particles.value) return
    
    const particleCount = 50
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div')
        particle.className = 'absolute rounded-full bg-gradient-to-r from-blue-400/20 to-purple-500/20'
        
        // –°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        const size = Math.random() * 4 + 1
        const posX = Math.random() * 100
        const posY = Math.random() * 100
        
        particle.style.width = `${size}px`
        particle.style.height = `${size}px`
        particle.style.left = `${posX}%`
        particle.style.top = `${posY}%`
        
        particles.value.appendChild(particle)
        
        // –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º $anime
        const { $anime } = useNuxtApp()
        $anime({
            targets: particle,
            translateX: () => $anime.random(-100, 100),
            translateY: () => $anime.random(-100, 100),
            duration: () => $anime.random(15000, 30000),
            easing: 'easeInOutSine',
            loop: true,
            direction: 'alternate'
        })
    }
}

/* –û—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
const runAnimations = () => {
    const { $anime } = useNuxtApp()
    
    // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≥–µ—Ä–æ—è
    const heroTimeline = $anime.timeline({
        duration: 800,
        easing: 'easeOutElastic(1, .8)'
    })
    
    heroTimeline
        .add({
            targets: mainTitle.value,
            opacity: [0, 1],
            translateY: [50, 0],
            duration: 1200
        })
        .add({
            targets: subtitle.value,
            opacity: [0, 1],
            translateY: [30, 0],
            duration: 1000
        }, '-=800')
        .add({
            targets: ctaButton.value,
            opacity: [0, 1],
            translateY: [20, 0],
            scale: [0.9, 1]
        }, '-=600')
        .add({
            targets: featuresList.value,
            opacity: [0, 1],
            translateY: [10, 0]
        }, '-=400')

    // –ê–Ω–∏–º–∞—Ü–∏—è —Å–µ–∫—Ü–∏–∏ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
    const cardsTimeline = $anime.timeline({
        delay: 1000
    })
    
    cardsTimeline
        .add({
            targets: sectionTitle.value,
            opacity: [0, 1],
            translateY: [30, 0],
            duration: 800,
            easing: 'easeOutCubic'
        })
        .add({
            targets: cardRefs.value,
            opacity: [0, 1],
            translateY: [40, 0],
            scale: [0.8, 1],
            duration: 800,
            easing: 'easeOutElastic(1, .8)',
            delay: $anime.stagger(200)
        })

    // –ü—É–ª—å—Å–∏—Ä—É—é—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è CTA –∫–Ω–æ–ø–∫–∏
    $anime({
        targets: ctaButton.value,
        scale: [1, 1.05],
        duration: 2000,
        easing: 'easeInOutSine',
        direction: 'alternate',
        loop: true
    })

}

onMounted(() => {
    createParticles()
    
    // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–π –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    setTimeout(runAnimations, 500)
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
    if (process.client) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const { $anime } = useNuxtApp()
                    $anime({
                        targets: entry.target,
                        opacity: [0, 1],
                        translateY: [30, 0],
                        duration: 800,
                        easing: 'easeOutCubic'
                    })
                }
            })
        }, { threshold: 0.1 })
        
    }
})
</script>

<style scoped>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π */
.absolute {
    will-change: transform;
}

/* –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª */
html {
    scroll-behavior: smooth;
}
</style>